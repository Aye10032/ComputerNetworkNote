# 3.5 介质访问控制

- **点对点链路**
  - 两个相邻节点的通过链路连接，没有第三者
  - 应用：PPP协议，常用于广域网
- **广播式链路**
  - 所有主机共享通信介质
  - 应用：早期以太网、局域网
  - 拓扑结构：星型（逻辑总线型）、总线型

{% hint style="success" %}

**介质访问控制**：采取一定的措施，使两对节点之间的通信不会发生互相干扰，分为两种

- 静态划分信道
  - 信道划分介质访问控制
- 动态划分信道
  - 轮询访问介质控制
  - 随机访问介质控制

{% endhint %}

## 3.5.1 信道划分介质控制

**多路复用**：将多个信号组合在一个信道上进行传输，到目的后再分离为多个信号

<mark style="color:orange;">**本质上**</mark>是将广播信号变为多个点对点链路

### 1、频分多路复用（FDM）

各个用户分配不同的<mark style="color:purple;">**频带**</mark>，之后始终使用相同的频带进行通信。

不同的用户在同样的时间占用不同的<mark style="color:purple;">**带宽**</mark>（模拟信号角度的带宽）

- 系统效率较高
- 实现简单



### 2、时分多路复用（TDM）

将时间划分为等长的<mark style="color:purple;">**时分复用帧**</mark>，每一帧划分为若干<mark style="color:purple;">**时隙**</mark>。

每一个用户在一个TDM帧中占用固定序号的时隙。

#### 改进：统计时分复用（STDM）

使用集中器收集各个用户的数据，并按照先后顺序存入自己的缓存，之后按照先后顺序填充STDM帧，帧满即发送出去。

STDM帧大小小于连接在集中器上的用户数。



### 3、波分多路复用（WDM）

介质为光纤，原理类似于<mark style="color:orange;">**光的频分多路复用**</mark>。



### 4、码分多路复用（CDM）

**码分多址（CDMA）**：将一个比特位用一组特定的<mark style="color:purple;">**码片**</mark>发送，每一个用户拥有唯一的码片。

码片直接发送代表1，反码发送代表0。

对于各个用户的码片，要求其<mark style="color:orange;">**规格化内积等于0，且其自身的内积为1**</mark>，即：
$$
\boldsymbol{S}\cdot\boldsymbol{T} \equiv \frac{1}{m} \sum_{i=1}^{m}\boldsymbol{S}_{i}\cdot\boldsymbol{T}_{i} = 0\\
\boldsymbol{S}\cdot\boldsymbol{S} \equiv \frac{1}{m} \sum_{i=1}^{m}\boldsymbol{S}_{i}^{2}=1
$$

- m为码片的位数
- S和T分别为两个用户的码片

#### 两个数据的结合

将两个码片线性相加：
$$
\boldsymbol{S}\pm\boldsymbol{T}
$$
中间符号视发送0或1变化（反码即为 -）

#### 两个数据的分离

将合并的数据与码片取规格化内积：
$$
\boldsymbol{S}\cdot(\boldsymbol{S-T}) = \frac{1}{m} \sum_{i=1}^{m}\boldsymbol{S}_{i}\cdot(\boldsymbol{S-T})_{i}
$$
得到的结果即为S对应用户发送的比特位。



## 3.5.2 随机访问介质控制

所有的用户可以随机的发送信息，发送信息时占用<mark style="color:orange;">**全部带宽**</mark>。

### 1、ALOHA协议

![ALHOA协议](../.gitbook/assets/ALHOA协议.png)

- 不监听信道
- 不按时间槽发送
- 随即重发

#### 冲突检测

在传输数据发送冲突时，接收方收到错误的帧，则返回错误信号（或不发送确认信号）

接收方在发现超时或错误后在**随机时间**内重新发送数据帧

#### 时隙ALHOA协议

把时间分成若干个相同的**时间片**，所有用户在时间片开始时刻同步接入网络信道，若发生冲突，则必须等到下一个时间片开始时刻再发送

- 比纯ALHOA效率更高，吞吐量更高
- 只有在时间片（时隙）开始时才能发送

### 2、CSMA协议

**载波监听多路访问协议（CSMA）**：在发送帧之前，先<mark style="color:orange;">**监听**</mark>信道，并信道状态决定是否发送数据

- **CS**：载波侦听/监听，每一个站在发送数据之前要检测一下总线上是否有其他计算机在发送数据
- **MA**：多点接入，表示许多计算机以多点接入的方式连接在一根总线上

#### （1）1-坚持CSMA

- 信道空闲
  - 直接传输数据
- 信道忙碌
  - 一直监听信道，空闲马上传输
- 发生冲突
  - 一段时间内未收到确认回复，则等待一段时间继续开始监听信道

**优点**：只要媒体空闲，站点就马上发送，避免了媒体利用率的损失。 

**缺点**：假如有两个或两个以上的站点有数据要发送，冲突就不可避免。

#### （2）非坚持CSMA

- 信道空闲
  - 直接传输数据
- 信道忙碌
  - 等待随机时间后继续开始监听

**优点**：采用随机的重发延迟时间可以<mark style="color:orange;">**减少冲突发生的可能性**</mark>。
**缺点**：可能存在大家都在延迟等待过程中，使得媒体仍可能处于空闲状态，媒体使用率降低。

#### （3）p-坚持CSMA

